{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Engin\\\\Desktop\\\\telemetri\\\\adini-arayuz-godum\\\\src\\\\context\\\\WebSocketContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\n// src/context/WebSocketContext.js\nimport React, { createContext, useContext, useEffect, useRef } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst WebSocketContext = /*#__PURE__*/createContext(null);\nexport const WebSocketProvider = ({\n  children\n}) => {\n  _s();\n  const socketRef = useRef(null);\n  const listenersRef = useRef([]);\n  const connect = () => {\n    if (socketRef.current && [WebSocket.OPEN, WebSocket.CONNECTING].includes(socketRef.current.readyState)) {\n      return;\n    }\n    socketRef.current = new WebSocket(\"ws://localhost:8765\");\n    socketRef.current.onopen = () => {\n      console.log(\"WebSocket bağlantısı başarılı!\");\n      notifyListeners({\n        type: 'status',\n        connected: true\n      });\n    };\n    socketRef.current.onclose = () => {\n      console.log(\"WebSocket bağlantısı kapandı. Yeniden bağlanılıyor...\");\n      notifyListeners({\n        type: 'status',\n        connected: false\n      });\n      setTimeout(connect, 5000);\n    };\n    socketRef.current.onerror = error => {\n      console.error(\"WebSocket hatası:\", error);\n      notifyListeners({\n        type: 'error',\n        error: \"Bağlantı hatası\"\n      });\n    };\n    socketRef.current.onmessage = event => {\n      notifyListeners({\n        type: 'data',\n        data: event.data\n      });\n    };\n  };\n  const notifyListeners = message => {\n    listenersRef.current.forEach(listener => listener(message));\n  };\n  const addListener = callback => {\n    listenersRef.current.push(callback);\n    return () => {\n      listenersRef.current = listenersRef.current.filter(l => l !== callback);\n    };\n  };\n  useEffect(() => {\n    connect();\n    return () => {\n      if (socketRef.current) {\n        socketRef.current.close();\n      }\n    };\n  }, []);\n  return /*#__PURE__*/_jsxDEV(WebSocketContext.Provider, {\n    value: {\n      addListener\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n};\n_s(WebSocketProvider, \"rMOVZW0NmvnGDMJPFWXPTkGgiZg=\");\n_c = WebSocketProvider;\nexport const useWebSocket = () => {\n  _s2();\n  return useContext(WebSocketContext);\n};\n_s2(useWebSocket, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nvar _c;\n$RefreshReg$(_c, \"WebSocketProvider\");","map":{"version":3,"names":["React","createContext","useContext","useEffect","useRef","jsxDEV","_jsxDEV","WebSocketContext","WebSocketProvider","children","_s","socketRef","listenersRef","connect","current","WebSocket","OPEN","CONNECTING","includes","readyState","onopen","console","log","notifyListeners","type","connected","onclose","setTimeout","onerror","error","onmessage","event","data","message","forEach","listener","addListener","callback","push","filter","l","close","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useWebSocket","_s2","$RefreshReg$"],"sources":["C:/Users/Engin/Desktop/telemetri/adini-arayuz-godum/src/context/WebSocketContext.js"],"sourcesContent":["// src/context/WebSocketContext.js\r\nimport React, { createContext, useContext, useEffect, useRef } from 'react';\r\n\r\nconst WebSocketContext = createContext(null);\r\n\r\nexport const WebSocketProvider = ({ children }) => {\r\n  const socketRef = useRef(null);\r\n  const listenersRef = useRef([]);\r\n\r\n  const connect = () => {\r\n    if (socketRef.current && [WebSocket.OPEN, WebSocket.CONNECTING].includes(socketRef.current.readyState)) {\r\n      return;\r\n    }\r\n\r\n    socketRef.current = new WebSocket(\"ws://localhost:8765\");\r\n\r\n    socketRef.current.onopen = () => {\r\n      console.log(\"WebSocket bağlantısı başarılı!\");\r\n      notifyListeners({ type: 'status', connected: true });\r\n    };\r\n\r\n    socketRef.current.onclose = () => {\r\n      console.log(\"WebSocket bağlantısı kapandı. Yeniden bağlanılıyor...\");\r\n      notifyListeners({ type: 'status', connected: false });\r\n      setTimeout(connect, 5000);\r\n    };\r\n\r\n    socketRef.current.onerror = (error) => {\r\n      console.error(\"WebSocket hatası:\", error);\r\n      notifyListeners({ type: 'error', error: \"Bağlantı hatası\" });\r\n    };\r\n\r\n    socketRef.current.onmessage = (event) => {\r\n      notifyListeners({ type: 'data', data: event.data });\r\n    };\r\n  };\r\n\r\n  const notifyListeners = (message) => {\r\n    listenersRef.current.forEach(listener => listener(message));\r\n  };\r\n\r\n  const addListener = (callback) => {\r\n    listenersRef.current.push(callback);\r\n    return () => {\r\n      listenersRef.current = listenersRef.current.filter(l => l !== callback);\r\n    };\r\n  };\r\n\r\n  useEffect(() => {\r\n    connect();\r\n    return () => {\r\n      if (socketRef.current) {\r\n        socketRef.current.close();\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <WebSocketContext.Provider value={{ addListener }}>\r\n      {children}\r\n    </WebSocketContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useWebSocket = () => useContext(WebSocketContext);"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}